name: Delete All Releases

on:
  workflow_dispatch: # Manuel tetikleme
    inputs:
      confirm:
        description: "Gerçekten tüm release'leri silmek istiyor musun? 'YES' yaz."
        required: true
        default: "NO"

jobs:
  delete_releases:
    if: ${{ github.event.inputs.confirm == 'YES' }}
    runs-on: ubuntu-latest

    steps:
      - name: List releases
        id: list
        run: |
          gh release list --limit 500 \
            | awk '{print $3}' > releases.txt

      - name: Delete releases
        run: |
          while read tag; do
            if [ -n "$tag" ]; then
              echo "Deleting release: $tag"
              gh release delete -y "$tag"
            fi
          done < releases.txt
